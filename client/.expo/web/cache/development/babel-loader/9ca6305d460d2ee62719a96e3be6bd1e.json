{"ast":null,"code":"import _objectDestructuringEmpty from \"@babel/runtime/helpers/objectDestructuringEmpty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/rachael-andrew/Bootcamp/Project-3:AuthAPI/project-3/Project-3/client/app/scenes/auth/Username.js\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport * as api from \"../../services/auth\";\nimport { useAuth } from \"../../providers/auth\";\nimport Form from 'react-native-basic-form';\nimport { Header, ErrorText } from \"../../components/Shared\";\nexport default function Username(props) {\n  var navigation = props.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useAuth = useAuth(),\n      state = _useAuth.state,\n      updateUser = _useAuth.updateUser;\n\n  var fields = [{\n    name: 'username',\n    label: 'Username',\n    required: true\n  }];\n\n  function onSubmit(data) {\n    var response;\n    return _regeneratorRuntime.async(function onSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(api.updateProfile(state.user._id, data));\n\n          case 4:\n            response = _context.sent;\n            updateUser(response.user);\n            setLoading(false);\n            navigation.navigate('App');\n            _context.next = 14;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](1);\n            setError(_context.t0.message);\n            setLoading(false);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 10]], Promise);\n  }\n\n  var formProps = {\n    title: \"Submit\",\n    fields: fields,\n    onSubmit: onSubmit,\n    loading: loading\n  };\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      paddingHorizontal: 16,\n      backgroundColor: \"#fff\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, React.createElement(Header, {\n    title: \"Select Username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, React.createElement(ErrorText, {\n    error: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }), React.createElement(Form, _extends({}, formProps, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }))));\n}\n;\n\nUsername.navigationOptions = function (_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  return {\n    title: \"\"\n  };\n};","map":{"version":3,"sources":["/Users/rachael-andrew/Bootcamp/Project-3:AuthAPI/project-3/Project-3/client/app/scenes/auth/Username.js"],"names":["React","useState","api","useAuth","Form","Header","ErrorText","Username","props","navigation","error","setError","loading","setLoading","state","updateUser","fields","name","label","required","onSubmit","data","updateProfile","user","_id","response","navigate","message","formProps","title","flex","paddingHorizontal","backgroundColor","navigationOptions"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;AAGA,OAAO,KAAKC,GAAZ;AACA,SAASC,OAAT;AAEA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,SAAQC,MAAR,EAAgBC,SAAhB;AAEA,eAAe,SAASC,QAAT,CAAmBC,KAAnB,EAA0B;AAAA,MAC9BC,UAD8B,GAChBD,KADgB,CAC9BC,UAD8B;;AAAA,kBAIXR,QAAQ,CAAC,IAAD,CAJG;AAAA;AAAA,MAI9BS,KAJ8B;AAAA,MAIvBC,QAJuB;;AAAA,mBAKPV,QAAQ,CAAC,KAAD,CALD;AAAA;AAAA,MAK9BW,OAL8B;AAAA,MAKrBC,UALqB;;AAAA,iBAMPV,OAAO,EANA;AAAA,MAM7BW,KAN6B,YAM7BA,KAN6B;AAAA,MAMtBC,UANsB,YAMtBA,UANsB;;AAQrC,MAAMC,MAAM,GAAG,CACX;AAACC,IAAAA,IAAI,EAAE,UAAP;AAAmBC,IAAAA,KAAK,EAAE,UAA1B;AAAsCC,IAAAA,QAAQ,EAAE;AAAhD,GADW,CAAf;;AAIA,WAAeC,QAAf,CAAwBC,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AACIR,YAAAA,UAAU,CAAC,IAAD,CAAV;AADJ;AAAA;AAAA,6CAI6BX,GAAG,CAACoB,aAAJ,CAAkBR,KAAK,CAACS,IAAN,CAAWC,GAA7B,EAAkCH,IAAlC,CAJ7B;;AAAA;AAIYI,YAAAA,QAJZ;AAKQV,YAAAA,UAAU,CAACU,QAAQ,CAACF,IAAV,CAAV;AAEAV,YAAAA,UAAU,CAAC,KAAD,CAAV;AAEAJ,YAAAA,UAAU,CAACiB,QAAX,CAAoB,KAApB;AATR;AAAA;;AAAA;AAAA;AAAA;AAWQf,YAAAA,QAAQ,CAAC,YAAMgB,OAAP,CAAR;AACAd,YAAAA,UAAU,CAAC,KAAD,CAAV;;AAZR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgBA,MAAIe,SAAS,GAAG;AAACC,IAAAA,KAAK,EAAE,QAAR;AAAkBb,IAAAA,MAAM,EAANA,MAAlB;AAA0BI,IAAAA,QAAQ,EAARA,QAA1B;AAAoCR,IAAAA,OAAO,EAAPA;AAApC,GAAhB;AACA,SACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACkB,MAAAA,IAAI,EAAE,CAAP;AAAUC,MAAAA,iBAAiB,EAAE,EAA7B;AAAiCC,MAAAA,eAAe,EAAC;AAAjD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAE,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACF,MAAAA,IAAI,EAAC;AAAN,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAEpB,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,IAAD,eAAUkB,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAFJ,CAFJ,CADJ;AASH;AAAA;;AAEDrB,QAAQ,CAAC0B,iBAAT,GAA6B,gBAAQ;AAAA;;AACjC,SAAO;AACHJ,IAAAA,KAAK;AADF,GAAP;AAGH,CAJD","sourcesContent":["import React, { useState } from 'react';\nimport {View} from 'react-native';\n\nimport * as api from \"../../services/auth\";\nimport { useAuth } from \"../../providers/auth\";\n\nimport Form from 'react-native-basic-form';\nimport {Header, ErrorText} from \"../../components/Shared\";\n\nexport default function Username (props) {\n    const {navigation} = props;\n\n    //1 - DECLARE VARIABLES\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const { state, updateUser } = useAuth();\n\n    const fields = [\n        {name: 'username', label: 'Username', required: true}\n    ];\n\n    async function onSubmit(data) {\n        setLoading(true);\n\n        try {\n            let response = await api.updateProfile(state.user._id, data);\n            updateUser(response.user);\n\n            setLoading(false);\n\n            navigation.navigate('App');\n        } catch (error) {\n            setError(error.message);\n            setLoading(false)\n        }\n    }\n\n    let formProps = {title: \"Submit\", fields, onSubmit, loading };\n    return (\n        <View style={{flex: 1, paddingHorizontal: 16, backgroundColor:\"#fff\"}}>\n            <Header title={\"Select Username\"}/>\n            <View style={{flex:1}}>\n                <ErrorText error={error}/>\n                <Form {...formProps}/>\n            </View>\n        </View>\n    );\n};\n\nUsername.navigationOptions = ({}) => {\n    return {\n        title: ``\n    }\n};"]},"metadata":{},"sourceType":"module"}