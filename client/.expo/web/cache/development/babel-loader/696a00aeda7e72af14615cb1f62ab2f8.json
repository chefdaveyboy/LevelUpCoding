{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/rachael-andrew/Bootcamp/Project-3:AuthAPI/project-3/client/screens/home/UpdateProfile.js\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport * as api from \"../../services/auth\";\nimport Form from 'react-native-basic-form';\nimport { ErrorText } from \"../../components/Shared\";\nexport default function UpdateProfile(props) {\n  var navigation = props.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useAuth = useAuth(),\n      state = _useAuth.state,\n      updateUser = _useAuth.updateUser;\n\n  var fields = [{\n    name: 'firstName',\n    label: 'First Name',\n    required: true,\n    value: state.user.firstName\n  }, {\n    name: 'lastName',\n    label: 'Last Name',\n    required: true,\n    value: state.user.lastName\n  }, {\n    name: 'username',\n    label: 'Username',\n    required: true,\n    value: state.user.username\n  }];\n\n  function onSubmit(data) {\n    var response;\n    return _regeneratorRuntime.async(function onSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(api.updateProfile(state.user._id, data));\n\n          case 4:\n            response = _context.sent;\n            updateUser(response.user);\n            setLoading(false);\n            navigation.goBack();\n            _context.next = 14;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](1);\n            setError(_context.t0.message);\n            setLoading(false);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 10]], Promise);\n  }\n\n  var formProps = {\n    title: \"Submit\",\n    fields: fields,\n    onSubmit: onSubmit,\n    loading: loading\n  };\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      paddingHorizontal: 16\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, React.createElement(ErrorText, {\n    error: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }), React.createElement(Form, _extends({}, formProps, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }))));\n}\n;","map":{"version":3,"sources":["/Users/rachael-andrew/Bootcamp/Project-3:AuthAPI/project-3/client/screens/home/UpdateProfile.js"],"names":["React","useState","api","Form","ErrorText","UpdateProfile","props","navigation","error","setError","loading","setLoading","useAuth","state","updateUser","fields","name","label","required","value","user","firstName","lastName","username","onSubmit","data","updateProfile","_id","response","goBack","message","formProps","title","flex","paddingHorizontal"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;;AAGA,OAAO,KAAKC,GAAZ;AAEA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,SAAQC,SAAR;AAEA,eAAe,SAASC,aAAT,CAAwBC,KAAxB,EAA+B;AAAA,MACnCC,UADmC,GACrBD,KADqB,CACnCC,UADmC;;AAAA,kBAIhBN,QAAQ,CAAC,IAAD,CAJQ;AAAA;AAAA,MAInCO,KAJmC;AAAA,MAI5BC,QAJ4B;;AAAA,mBAKZR,QAAQ,CAAC,KAAD,CALI;AAAA;AAAA,MAKnCS,OALmC;AAAA,MAK1BC,UAL0B;;AAAA,iBAMZC,OAAO,EANK;AAAA,MAMlCC,KANkC,YAMlCA,KANkC;AAAA,MAM3BC,UAN2B,YAM3BA,UAN2B;;AAQ1C,MAAMC,MAAM,GAAG,CACX;AAACC,IAAAA,IAAI,EAAE,WAAP;AAAoBC,IAAAA,KAAK,EAAE,YAA3B;AAAyCC,IAAAA,QAAQ,EAAE,IAAnD;AAAyDC,IAAAA,KAAK,EAACN,KAAK,CAACO,IAAN,CAAWC;AAA1E,GADW,EAEX;AAACL,IAAAA,IAAI,EAAE,UAAP;AAAmBC,IAAAA,KAAK,EAAE,WAA1B;AAAuCC,IAAAA,QAAQ,EAAE,IAAjD;AAAuDC,IAAAA,KAAK,EAACN,KAAK,CAACO,IAAN,CAAWE;AAAxE,GAFW,EAGX;AAACN,IAAAA,IAAI,EAAE,UAAP;AAAmBC,IAAAA,KAAK,EAAC,UAAzB;AAAqCC,IAAAA,QAAQ,EAAE,IAA/C;AAAqDC,IAAAA,KAAK,EAACN,KAAK,CAACO,IAAN,CAAWG;AAAtE,GAHW,CAAf;;AAMA,WAAeC,QAAf,CAAwBC,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AACId,YAAAA,UAAU,CAAC,IAAD,CAAV;AADJ;AAAA;AAAA,6CAI6BT,GAAG,CAACwB,aAAJ,CAAkBb,KAAK,CAACO,IAAN,CAAWO,GAA7B,EAAkCF,IAAlC,CAJ7B;;AAAA;AAIYG,YAAAA,QAJZ;AAKQd,YAAAA,UAAU,CAACc,QAAQ,CAACR,IAAV,CAAV;AAEAT,YAAAA,UAAU,CAAC,KAAD,CAAV;AAEAJ,YAAAA,UAAU,CAACsB,MAAX;AATR;AAAA;;AAAA;AAAA;AAAA;AAWQpB,YAAAA,QAAQ,CAAC,YAAMqB,OAAP,CAAR;AACAnB,YAAAA,UAAU,CAAC,KAAD,CAAV;;AAZR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgBA,MAAIoB,SAAS,GAAG;AAACC,IAAAA,KAAK,EAAE,QAAR;AAAkBjB,IAAAA,MAAM,EAANA,MAAlB;AAA0BS,IAAAA,QAAQ,EAARA,QAA1B;AAAoCd,IAAAA,OAAO,EAAPA;AAApC,GAAhB;AACA,SACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACuB,MAAAA,IAAI,EAAC,CAAN;AAASC,MAAAA,iBAAiB,EAAE;AAA5B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACD,MAAAA,IAAI,EAAC;AAAN,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAEzB,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,IAAD,eAAUuB,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAFJ,CADJ,CADJ;AAQH;AAAA","sourcesContent":["import React, { useState } from 'react';\nimport {View, Platform} from 'react-native';\n\nimport * as api from \"../../services/auth\";\n\nimport Form from 'react-native-basic-form';\nimport {ErrorText} from \"../../components/Shared\";\n\nexport default function UpdateProfile (props) {\n    const {navigation} = props;\n\n    // DECLARE VARS\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const { state, updateUser } = useAuth();\n\n    const fields = [\n        {name: 'firstName', label: 'First Name', required: true, value:state.user.firstName},\n        {name: 'lastName', label: 'Last Name', required: true, value:state.user.lastName},\n        {name: 'username', label:'Username', required: true, value:state.user.username}\n    ];\n\n    async function onSubmit(data) {\n        setLoading(true);\n\n        try {\n            let response = await api.updateProfile(state.user._id, data);\n            updateUser(response.user);\n\n            setLoading(false);\n\n            navigation.goBack();\n        } catch (error) {\n            setError(error.message);\n            setLoading(false)\n        }\n    }\n\n    let formProps = {title: \"Submit\", fields, onSubmit, loading};\n    return (\n        <View style={{flex:1, paddingHorizontal: 16}}>\n            <View style={{flex:1}}>\n                <ErrorText error={error}/>\n                <Form {...formProps}/>\n            </View>\n        </View>\n    );\n};"]},"metadata":{},"sourceType":"module"}